<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conversor de Audio Analógico a Digital</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/estilos.css">
</head>
<body>
    <div class="container py-4">
        <h1 class="text-center mb-4">Conversor de Audio Analógico a Digital</h1>
        <div id="app-audio" class="mb-4">
            <form id="form-audio" enctype="multipart/form-data" class="mb-3">
                <div class="mb-2">
                    <label for="input-audio" class="form-label">Selecciona o graba un archivo de audio:</label>
                    <input class="form-control" type="file" id="input-audio" name="audio" accept="audio/*">
                </div>
                <div class="mb-2">
                    <button type="button" id="btn-grabar" class="btn btn-secondary">Grabar audio</button>
                    <button type="button" id="btn-detener" class="btn btn-danger d-none">Detener</button>
                    <span id="grabando-label" class="text-danger ms-2 d-none">● Grabando...</span>
                </div>
                <audio id="audio-preview" controls class="w-100 d-none mb-2"></audio>
                <button type="submit" class="btn btn-primary">Subir audio</button>
            </form>
            <div id="mensaje-audio" class="text-success"></div>
        </div>
        <div id="app-controles" class="mb-4">
            <form id="form-conversion" class="row g-3 align-items-end">
                <div class="col-md-4">
                    <label for="frecuencia" class="form-label">Frecuencia de muestreo (Hz)</label>
                    <input type="number" class="form-control" id="frecuencia" name="frecuencia" value="44100" min="8000" max="96000" step="1000">
                </div>
                <div class="col-md-4">
                    <label for="bits" class="form-label">Profundidad de bits</label>
                    <select class="form-select" id="bits" name="bits">
                        <option value="8">8</option>
                        <option value="16" selected>16</option>
                        <option value="24">24</option>
                        <option value="32">32</option>
                    </select>
                </div>
                <div class="col-md-4">
                    <button type="submit" class="btn btn-success">Convertir audio</button>
                </div>
            </form>
            <div id="mensaje-conversion" class="text-success mt-2"></div>
        </div>
        <div id="app-visualizacion" class="mb-4">
            <h5>Forma de onda</h5>
            <canvas id="canvas-onda" width="800" height="150" class="mb-3 border"></canvas>
            <h5>Espectro de frecuencia</h5>
            <canvas id="canvas-espectro" width="800" height="150" class="mb-3 border"></canvas>
        </div>
        <div id="app-exportar" class="mb-4">
            <a id="btn-descargar" href="#" class="btn btn-outline-primary" download="audio_convertido.wav">Descargar audio procesado</a>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/js/visualizacion.js"></script>
</body>
</html> 